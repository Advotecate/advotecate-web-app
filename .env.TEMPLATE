# ==============================================================================
# ADVOTECATE BACKEND - COMPLETE ENVIRONMENT CONFIGURATION
# ==============================================================================
# Copy this entire file to .env and replace the placeholder values
# NEVER commit .env to git (it's in .gitignore)
# ==============================================================================

# ------------------------------------------------------------------------------
# üîë SUPABASE - REQUIRED (Get from https://app.supabase.com)
# ------------------------------------------------------------------------------
# Steps to get these:
# 1. Go to https://app.supabase.com
# 2. Click your project
# 3. Settings (gear icon) ‚Üí API tab
# 4. Copy the values below

SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlvdXItcHJvamVjdC1pZCIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNjkwMDAwMDAwLCJleHAiOjE4NDc3ODAwMDB9.your-anon-key-signature
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlvdXItcHJvamVjdC1pZCIsInJvbGUiOiJzZXJ2aWNlX3JvbGUiLCJpYXQiOjE2OTAwMDAwMDAsImV4cCI6MTg0Nzc4MDAwMH0.your-service-role-key-signature

# ------------------------------------------------------------------------------
# üîê JWT SECRETS - REQUIRED (Generate with: openssl rand -base64 32)
# ------------------------------------------------------------------------------
# Run this command 3 times and paste the outputs:
# openssl rand -base64 32

JWT_ACCESS_SECRET=REPLACE_WITH_RANDOM_32_CHAR_STRING
JWT_REFRESH_SECRET=REPLACE_WITH_RANDOM_32_CHAR_STRING

# JWT token expiration
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# ------------------------------------------------------------------------------
# üîí ENCRYPTION - REQUIRED (Generate with: openssl rand -base64 32)
# ------------------------------------------------------------------------------
ENCRYPTION_KEY=REPLACE_WITH_RANDOM_32_CHAR_STRING

# ------------------------------------------------------------------------------
# üóÑÔ∏è DATABASE (OPTIONAL - Only if using direct PostgreSQL connection)
# ------------------------------------------------------------------------------
# If you want to connect directly to Supabase PostgreSQL instead of using SDK
# Get this from: Supabase ‚Üí Settings ‚Üí Database ‚Üí Connection string (URI)
# Replace [YOUR-PASSWORD] with your database password
DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.your-project.supabase.co:5432/postgres

# ------------------------------------------------------------------------------
# üí≥ FLUIDPAY - REQUIRED FOR PAYMENTS
# ------------------------------------------------------------------------------
# Get from https://fluidpay.com dashboard
# Use sandbox keys for development
FLUIDPAY_API_KEY=pub_330kTO6pORDnEdVP1NSMp7AWPMu
FLUIDPAY_SECRET_KEY=api_330kYWzNcgyrd84mgLFoq6ZV1Ad
FLUIDPAY_WEBHOOK_SECRET=your-webhook-secret-from-fluidpay
FLUIDPAY_ENVIRONMENT=sandbox

# Change to 'production' when going live
# FLUIDPAY_ENVIRONMENT=production

# ------------------------------------------------------------------------------
# üöÄ APPLICATION SETTINGS
# ------------------------------------------------------------------------------
NODE_ENV=development
PORT=3001
API_VERSION=v1

# Frontend URL (for CORS)
FRONTEND_URL=http://localhost:3000

# Multiple origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# ------------------------------------------------------------------------------
# üìß EMAIL (OPTIONAL - For notifications)
# ------------------------------------------------------------------------------
# Gmail example (use App Password, not regular password)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-specific-password
SMTP_FROM=Advotecate <noreply@advotecate.com>

# Or use SendGrid, Mailgun, etc.
# SMTP_HOST=smtp.sendgrid.net
# SMTP_USER=apikey
# SMTP_PASS=your-sendgrid-api-key

# ------------------------------------------------------------------------------
# üí∞ COMPLIANCE & FEC SETTINGS
# ------------------------------------------------------------------------------
# Platform fees (Stripe-like pricing)
PLATFORM_FEE_PERCENTAGE=2.9
PLATFORM_FEE_FIXED=0.30

# FEC contribution limits (2024 cycle)
DONATION_LIMIT_INDIVIDUAL_ANNUAL=2900
DONATION_LIMIT_INDIVIDUAL_ELECTION=3300
DONATION_LIMIT_PAC_ANNUAL=5000
DONATION_LIMIT_PAC_ELECTION=15000

# FEC API (optional)
FEC_API_KEY=
FEC_COMMITTEE_ID=

# ------------------------------------------------------------------------------
# üî¥ REDIS (OPTIONAL - For caching and rate limiting)
# ------------------------------------------------------------------------------
# If you have Redis running locally
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_TTL=3600

# If using Upstash or Redis Cloud, use their connection string
# REDIS_URL=redis://default:password@redis-host:port

# ------------------------------------------------------------------------------
# üîê SECURITY SETTINGS
# ------------------------------------------------------------------------------
# Password hashing (higher = more secure but slower)
BCRYPT_ROUNDS=12

# Session management
SESSION_TTL_HOURS=24
SESSION_REFRESH_THRESHOLD_HOURS=1

# Rate limiting
RATE_LIMIT_WINDOW_MINUTES=15
RATE_LIMIT_MAX_REQUESTS=100

# ------------------------------------------------------------------------------
# üìÅ FILE STORAGE (Supabase Storage buckets)
# ------------------------------------------------------------------------------
STORAGE_BUCKET_AVATARS=avatars
STORAGE_BUCKET_DOCUMENTS=documents
STORAGE_BUCKET_ORG_IMAGES=organization-images
STORAGE_BUCKET_FUNDRAISER_IMAGES=fundraiser-images

# Max file sizes (in bytes)
MAX_AVATAR_SIZE=5242880        # 5MB
MAX_DOCUMENT_SIZE=10485760     # 10MB
MAX_IMAGE_SIZE=10485760        # 10MB

# ------------------------------------------------------------------------------
# üéöÔ∏è FEATURE FLAGS
# ------------------------------------------------------------------------------
ENABLE_RECURRING_DONATIONS=true
ENABLE_VOLUNTEER_MANAGEMENT=true
ENABLE_EVENT_REGISTRATION=true
ENABLE_INTEREST_PERSONALIZATION=true
ENABLE_COMPLIANCE_REPORTING=true

# ------------------------------------------------------------------------------
# üìä MONITORING & LOGGING
# ------------------------------------------------------------------------------
# Log level: error | warn | info | debug
LOG_LEVEL=info

# Sentry for error tracking (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# Google Analytics (optional)
GA_TRACKING_ID=

# Enable analytics
ANALYTICS_ENABLED=true

# ------------------------------------------------------------------------------
# üîß DEVELOPMENT SETTINGS
# ------------------------------------------------------------------------------
# Enable detailed error messages (ONLY in development!)
DEBUG_MODE=true
ENABLE_API_DOCS=true
ENABLE_QUERY_LOGGING=false

# Disable in production
# DEBUG_MODE=false
# ENABLE_API_DOCS=false

# ------------------------------------------------------------------------------
# ü™ù WEBHOOKS (OPTIONAL)
# ------------------------------------------------------------------------------
# Your webhook endpoints for external notifications
WEBHOOK_PAYMENT_SUCCESS=https://yourdomain.com/webhooks/payment-success
WEBHOOK_PAYMENT_FAILED=https://yourdomain.com/webhooks/payment-failed
WEBHOOK_COMPLIANCE_ALERT=https://yourdomain.com/webhooks/compliance-alert
WEBHOOK_DONATION_RECEIVED=https://yourdomain.com/webhooks/donation-received

# ------------------------------------------------------------------------------
# üåê EXTERNAL SERVICES (OPTIONAL)
# ------------------------------------------------------------------------------
# Twilio for SMS notifications
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# AWS S3 (if using instead of Supabase Storage)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=

# Stripe (alternative payment processor)
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_WEBHOOK_SECRET=

# ------------------------------------------------------------------------------
# üß™ TESTING (OPTIONAL)
# ------------------------------------------------------------------------------
# Test database (separate from development)
TEST_DATABASE_URL=postgresql://postgres:password@localhost:5432/advotecate_test
TEST_SUPABASE_URL=https://test-project.supabase.co
TEST_SUPABASE_KEY=test-key

# ------------------------------------------------------------------------------
# üöÄ PRODUCTION OVERRIDES
# ------------------------------------------------------------------------------
# Uncomment and set when deploying to production

# NODE_ENV=production
# PORT=8080
# FRONTEND_URL=https://advotecate.com
# LOG_LEVEL=warn
# DEBUG_MODE=false
# ENABLE_API_DOCS=false
# FLUIDPAY_ENVIRONMENT=production

# ==============================================================================
# ‚úÖ CHECKLIST BEFORE RUNNING
# ==============================================================================
# [ ] Replaced all SUPABASE_* values with your project credentials
# [ ] Generated and set JWT_ACCESS_SECRET (openssl rand -base64 32)
# [ ] Generated and set JWT_REFRESH_SECRET (openssl rand -base64 32)
# [ ] Generated and set ENCRYPTION_KEY (openssl rand -base64 32)
# [ ] Set FLUIDPAY_* credentials (use sandbox for dev)
# [ ] Updated FRONTEND_URL to match your frontend port
# [ ] Deployed permissions SQL to Supabase
# [ ] Created storage buckets in Supabase (avatars, documents, etc.)
# ==============================================================================
