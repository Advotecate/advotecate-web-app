# ==============================================================================
# ADVOTECATE BACKEND - SUPABASE CONFIGURATION
# ==============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control
# ==============================================================================

# ------------------------------------------------------------------------------
# SUPABASE CONFIGURATION (REQUIRED)
# ------------------------------------------------------------------------------
# Get these from your Supabase project settings: https://app.supabase.com/project/_/settings/api

# Your Supabase project URL (format: https://xxxxx.supabase.co)
SUPABASE_URL=https://your-project-id.supabase.co

# Supabase Anonymous Key (safe to use in client-side code)
# Used for authenticated user operations
SUPABASE_ANON_KEY=your-supabase-anon-key-here

# Supabase Service Role Key (KEEP SECRET!)
# Used for admin operations, bypasses Row Level Security
# NEVER expose this key in client-side code or public repositories
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key-here

# ------------------------------------------------------------------------------
# DATABASE (LEGACY - OPTIONAL IF USING DIRECT POSTGRES CONNECTION)
# ------------------------------------------------------------------------------
# You can also connect directly to Supabase PostgreSQL
# Get connection string from Supabase: Project Settings > Database > Connection string
# Format: postgresql://postgres:[password]@db.[project-ref].supabase.co:5432/postgres
DATABASE_URL=postgresql://postgres:your-db-password@db.your-project.supabase.co:5432/postgres

# ------------------------------------------------------------------------------
# JWT CONFIGURATION
# ------------------------------------------------------------------------------
# JWT secrets for token generation and verification
# Generate secure random strings: openssl rand -base64 32
JWT_ACCESS_SECRET=your-super-secret-access-key-change-in-production-min-32-chars
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-in-production-min-32-chars

# JWT expiration times
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# ------------------------------------------------------------------------------
# ENCRYPTION
# ------------------------------------------------------------------------------
# For encrypting sensitive data (banking info, etc.)
# Generate: openssl rand -base64 32
ENCRYPTION_KEY=your-32-byte-encryption-key-change-in-production-keep-secret

# ------------------------------------------------------------------------------
# FLUIDPAY PAYMENT PROCESSING
# ------------------------------------------------------------------------------
# FluidPay credentials - get from https://fluidpay.com
FLUIDPAY_API_KEY=pub_330kTO6pORDnEdVP1NSMp7AWPMu
FLUIDPAY_SECRET_KEY=api_330kYWzNcgyrd84mgLFoq6ZV1Ad
FLUIDPAY_WEBHOOK_SECRET=your-fluidpay-webhook-secret
FLUIDPAY_ENVIRONMENT=sandbox  # Use 'production' for live transactions

# ------------------------------------------------------------------------------
# APPLICATION SETTINGS
# ------------------------------------------------------------------------------
NODE_ENV=development  # development | staging | production
PORT=3001
FRONTEND_URL=http://localhost:3000

# API versioning
API_VERSION=v1

# ------------------------------------------------------------------------------
# REDIS (OPTIONAL - FOR CACHING AND RATE LIMITING)
# ------------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_TTL=3600  # Default cache TTL in seconds

# ------------------------------------------------------------------------------
# EMAIL CONFIGURATION (OPTIONAL)
# ------------------------------------------------------------------------------
# Email service for notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-specific-password
SMTP_FROM=Advotecate <noreply@advotecate.com>

# ------------------------------------------------------------------------------
# COMPLIANCE & FEC SETTINGS
# ------------------------------------------------------------------------------
# Platform fee structure (percentage + fixed amount per transaction)
PLATFORM_FEE_PERCENTAGE=2.9
PLATFORM_FEE_FIXED=0.30

# FEC donation limits (in dollars)
DONATION_LIMIT_INDIVIDUAL_ANNUAL=2900
DONATION_LIMIT_INDIVIDUAL_ELECTION=3300
DONATION_LIMIT_PAC_ANNUAL=5000

# Compliance reporting
FEC_API_KEY=your-fec-api-key-if-needed
FEC_COMMITTEE_ID=your-committee-id

# ------------------------------------------------------------------------------
# SECURITY SETTINGS
# ------------------------------------------------------------------------------
# Password hashing rounds (higher = more secure but slower)
BCRYPT_ROUNDS=12

# Session settings
SESSION_TTL_HOURS=24
SESSION_REFRESH_THRESHOLD_HOURS=1

# Rate limiting
RATE_LIMIT_WINDOW_MINUTES=15
RATE_LIMIT_MAX_REQUESTS=100

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,https://yourdomain.com

# ------------------------------------------------------------------------------
# MONITORING & LOGGING (OPTIONAL)
# ------------------------------------------------------------------------------
# Log level: error | warn | info | debug
LOG_LEVEL=info

# Sentry for error tracking (optional)
SENTRY_DSN=

# Analytics
ANALYTICS_ENABLED=true

# ------------------------------------------------------------------------------
# CLOUD STORAGE (FOR FILE UPLOADS)
# ------------------------------------------------------------------------------
# Supabase Storage bucket names
STORAGE_BUCKET_AVATARS=avatars
STORAGE_BUCKET_DOCUMENTS=documents
STORAGE_BUCKET_ORG_IMAGES=organization-images

# Max file sizes (in bytes)
MAX_AVATAR_SIZE=5242880  # 5MB
MAX_DOCUMENT_SIZE=10485760  # 10MB

# ------------------------------------------------------------------------------
# FEATURE FLAGS
# ------------------------------------------------------------------------------
ENABLE_RECURRING_DONATIONS=true
ENABLE_VOLUNTEER_MANAGEMENT=true
ENABLE_EVENT_REGISTRATION=true
ENABLE_INTEREST_PERSONALIZATION=true

# ------------------------------------------------------------------------------
# DEVELOPMENT / DEBUG SETTINGS
# ------------------------------------------------------------------------------
# Set to true to enable detailed error messages (NEVER use in production!)
DEBUG_MODE=false
ENABLE_API_DOCS=true  # Swagger/OpenAPI documentation
ENABLE_QUERY_LOGGING=false  # Log all database queries

# ------------------------------------------------------------------------------
# WEBHOOKS
# ------------------------------------------------------------------------------
# External webhook endpoints for integrations
WEBHOOK_PAYMENT_SUCCESS=https://yourdomain.com/webhooks/payment-success
WEBHOOK_COMPLIANCE_ALERT=https://yourdomain.com/webhooks/compliance-alert
